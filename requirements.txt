# Distributed LNT App High Level Requirements

## System Overview
The LNT Application is designed to manage tests of a distributed network of devices or DUTs (Devices Under Test). The system consists of four main components:

1. LNT Device Host
2. LNT App (core service)
3. LNT CLI Client
4. LNT GUI Service

### Technical Implementation
- python3.10 program language for components of the solution.

## 1. LNT Device Host Requirements

### 1.1 Device Management
- Program and erase DUTs
- Query connected DUT device types
- Report DUT status (idle/busy)

### 1.2 Communication
- Send and read data from DUT serial port
- Save serial data from DUTs locally for later extraction
- Stream serial data from DUTs upstream to the LNT App

### 1.3 Technical Implementation
- Runs on hardware platforms like Raspberry Pi
- Utilizes Docker containers
- Implements OpenOCD/UsbIP/BootLoader for device flashing
- Uses DUT serial port for reading and sending information

## 2. LNT App Core Requirements

### 2.1 Status Tracking
- Monitor LNT Device Host status (idle/busy/disconnected)
- Monitor DUT status (idle/busy/disconnected)
- Maintain system statistics:
  - Service uptime
  - Total tests run
  - Total testing hours
  - Maximum DUT count in a single test
  - Longest running test duration
  - Serial logs count and size
  - Streamed data count and size
  - ...other interesting stats...

### 2.2 Device Host Management
- Add/remove LNT Device Hosts
- Provision newly added hosts with Ansible
- Maintain inventory of LNT Device Hosts

### 2.3 Test Management
- Start/stop LNT tests
- Support concurrent tests across available Device Hosts
- Maintain a queue of pending, running, and finished tests
- Retain test data (binaries, serial streams, logs) based on configurable retention policies
- Support permanent retention of selected test results

### 2.4 User Management
- Implement user authentication with IDs and passwords
- Support role-based access control:
  - Tester role: Manage tests with restrictions (can only modify own tests)
  - Admin role: Configure app settings and manage tests without restrictions

### 2.5 Technical Implementation
- Implements Ansible for provisioning
- Communicates with Device Hosts via Rest Api
- Provides Rest APIs for interfacing with LNT Device Hosts, LNT App GUI and LNT CLI tool

## 3. LNT CLI Client Requirements

### 3.1 Status Queries
- Query LNT Device Host status (busy/idle)
- Query DUT status (busy/idle)

### 3.2 Test Management
- Start and stop LNT tests (with authentication)
- Query test status (pending/running/finished)

### 3.3 Data Management
- Copy saved serial data logged from DUTs
- Attach streamed serial data from DUTs to terminal

### 3.4 Technical Implementation
- Command-line interface
- Communicates with LNT App via Rest Api
- Can be integrated with Jenkins for automation

## 4. LNT GUI Requirements

### 4.1 Dashboard
- Display overall LNT status
- Show Device Host and DUT status
- Display LNT statistics
- Present test queue with pending, running, and finished tests

### 4.2 Device Host Management
- Add/remove LNT Device Hosts via REST API
- Display current inventory of Device Hosts
- Query connected DUTs for each Device Host

### 4.3 Settings Management
- Configure test queue length
- Set data retention policies

### 4.4 Test Management
- Start/stop LNT tests
- For pending tests: display awaited resources
- For running tests: display streaming data and list active Device Hosts
- For finished tests: display complete logs and provide download links
- Mark finished tests for permanent retention

### 4.5 Technical Implementation
- Web-based interface accessed via browser
- Communicates with LNT App via REST API

## 5. Documentation Requirements

### 5.1 User Guide
- Installation and setup instructions
- Instructions for adding LNT Device Hosts
- Test initiation procedures
- Custom GUI implementation guidelines

## System Architecture

The system diagram shows the following connections:
- Users interact with the system through the LNT GUI Service (web browser) or LNT CLI Client
- Jenkins can trigger tests via the LNT CLI Client
- The LNT App serves as the central component, communicating with Device Hosts via Rest Api
- LNT Device Hosts connect to physical DUT hardware via USB (OpenOCD/USBIP)
- Ansible is used for provisioning Device Hosts

This formal documentation provides a structured representation of the requirements for the Distributed LNT Application system.
